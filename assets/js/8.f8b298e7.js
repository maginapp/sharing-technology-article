(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{185:function(t,s,a){"use strict";a.r(s);var e=a(6),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vuepress搭建踩坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuepress搭建踩坑"}},[t._v("#")]),t._v(" vuepress搭建踩坑")]),t._v(" "),a("h2",{attrs:{id:"准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[t._v("#")]),t._v(" 准备")]),t._v(" "),a("h3",{attrs:{id:"获取token，用于travis构建发布权限配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取token，用于travis构建发布权限配置"}},[t._v("#")]),t._v(" 获取token，用于travis构建发布权限配置")]),t._v(" "),a("blockquote",[a("p",[t._v("个人账户 > developer settings > Personal access tokens > add")])]),t._v(" "),a("p",[t._v("配置token，暂时未研究具体权限需求，提供了除删除仓库外的所有权限")]),t._v(" "),a("p",[a("img",{attrs:{src:"/webstatic/2020-05-01-token-get.png",alt:"2020-5-1-token账户进入"}})]),t._v(" "),a("h3",{attrs:{id:"travis-ci注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#travis-ci注册"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://travis-ci.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("travis-ci"),a("OutboundLink")],1),t._v("注册")]),t._v(" "),a("p",[t._v("使用github同步账户数据")]),t._v(" "),a("blockquote",[a("p",[t._v("setting页配置需要同步到travis的仓库 > 进入对应的仓库settings配置 Environment Variables（键值对）")])]),t._v(" "),a("p",[t._v("配置的键名: 项目中的"),a("a",{attrs:{href:"#travis-%E9%83%A8%E7%BD%B2"}},[t._v(".travis.yml")]),t._v("文件中 github_token所配置的变量名对应\n值：上一步的token，考虑到安全性问题，设置为不可见")]),t._v(" "),a("h2",{attrs:{id:"开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[t._v("#")]),t._v(" 开始")]),t._v(" "),a("h3",{attrs:{id:"github创建仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github创建仓库"}},[t._v("#")]),t._v(" github创建仓库")]),t._v(" "),a("h3",{attrs:{id:"项目仓库设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目仓库设置"}},[t._v("#")]),t._v(" 项目仓库设置")]),t._v(" "),a("blockquote",[a("p",[t._v("settings > options > GitHub Pages > sources修改访问资源 "),a("code",[t._v("gh-pages")])])]),t._v(" "),a("p",[t._v("使用travis构建后，会自动想仓库推送打包后的gh-pages分钟，切换到该分支后，即可访问  "),a("code",[t._v("https://<username>.github.io/<repository name>/")])]),t._v(" "),a("h3",{attrs:{id:"vuepress-config-js设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuepress-config-js设置"}},[t._v("#")]),t._v(" .vuepress > config.js设置")]),t._v(" "),a("p",[t._v("base: 设置为仓库名 "),a("code",[t._v("<repository name>")])]),t._v(" "),a("p",[t._v("dest: 打包后的地址 默认 "),a("code",[t._v("<资源文件夹>/.vuepress/dist")])]),t._v(" "),a("h2",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),a("h3",{attrs:{id:"travis-部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#travis-部署"}},[t._v("#")]),t._v(" travis 部署")]),t._v(" "),a("p",[t._v("项目添加.travis.yml文件，"),a("a",{attrs:{href:"https://vuepress.vuejs.org/zh/guide/deploy.html#github-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" lts/*\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm ci\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run build\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("provider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pages\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("skip_cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("local_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docs/.vuepress/dist\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $GITHUB_TOKEN "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在 GitHub 中生成，用于允许 Travis 向你的仓库推送代码。在 Travis 的项目设置页面进行配置，设置为 secure variable")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("keep_history")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master\n")])])]),a("h3",{attrs:{id:"deploy-sh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-sh"}},[t._v("#")]),t._v(" deploy.sh")]),t._v(" "),a("p",[t._v("配置 deploy.sh ，"),a("a",{attrs:{href:"https://vuepress.vuejs.org/zh/guide/deploy.html#github-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/usr/bin/env sh")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 确保脚本抛出遇到的错误")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成静态文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run docs:build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入生成的文件夹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs/.vuepress/dist\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果是发布到自定义域名")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo 'www.example.com' > CNAME")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果发布到 https://<USERNAME>.github.io")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果发布到 https://<USERNAME>.github.io/<REPO>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push -f git@github.com:maginapp/sharing-technology-article.git master:gh-pages\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" -\n")])])]),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),a("h3",{attrs:{id:"sidebar-路径设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sidebar-路径设置"}},[t._v("#")]),t._v(" sidebar 路径设置")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("'/test/': 查找test文件夹下的index.html")])]),t._v(" "),a("li",[a("p",[t._v("'/test': test.html test/index.html")])])]),t._v(" "),a("h3",{attrs:{id:"图片路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片路径"}},[t._v("#")]),t._v(" 图片路径")]),t._v(" "),a("p",[t._v("静态资源路径")]),t._v(" "),a("ul",[a("li",[t._v("根据vuepress官网配置了alias，没能生效，最后选择了使用相对地址")])]),t._v(" "),a("p",[t._v("使用此写法会打包到"),a("code",[t._v("assets/img/")])]),t._v(" "),a("ul",[a("li",[t._v("放置在"),a("code",[t._v(".vuepress/public")]),t._v("中的资源会直接打包到根目录中，以"),a("code",[t._v(".vuepress/public")]),t._v("为根目录写地址即可")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# .vuepress/public\ntest.png\n\n# md文件\n![图片 来自 public](/test.png)\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);